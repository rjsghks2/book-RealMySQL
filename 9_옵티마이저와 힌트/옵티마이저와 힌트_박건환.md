# 9 옵티마이저와 힌트

## 9.1 개요

### 9.1.1 쿼리 실행 절차

Q. 쿼리 실행 3단계는 ?
> SQL 파싱, 실행계획 수립, 로우 소스 생성


### 9.1.2 옵티마이저의 종류

Q. 옵티마이저의 종류 두 가지는 ? 
> 비용기반 최적화 (CBO) , 규칙 기반 최적화 (RBO)

## 9.2 기본 데이터 처리

### 9.2.1 풀 테이블 스캔과 풀 인덱스 스캔

Q. 풀 테이블 스캔과 풀 인덱스 스캔을 설명하시오.
> 풀 테이블 스캔 : 인덱스를 사용하지 않고 테이블을 처음부터 끝까지 읽어서 처리한다.
> 풀 인덱스 스캔 : 인덱스를 처음부터 끝까지 읽어서 처리한다

Q. 풀 테이블 스캔이 발생하는 이유 3가지는?
> 테이블 레코드 건수가 너무 적어서 인덱스를 통해 읽는 것보다 테이블을 직접 읽는 것이 빠를 때
> 인덱스를 사용할 적절한 Where, On 절 조건이 없을 때
> 일치하는 데이터 건수가 너무 많을 때

Q. 리드 어헤드 기능은 테이블 풀 스캔 시에만 적용되는가 ? (O/X)
> X. 인덱스 풀 스캔 시에도 적용된다. 

### 9.2.2 병렬 처리 

Q. MySQL에서 병렬 처리란?
> 하나의 쿼리를 여러 스레드가 처리하는 방식

### 9.2.3 Order by 처리

Q. 정렬 처리 방법의 두 가지를 설명하시오
> 인덱스를 이용한 정렬, Filesort를 이용한 정렬

Q. 소트 버퍼란 ?
> MySQL에서 정렬을 수행하기 위해 만들어둔 메모리 공간이다. 

Q. 소트 버퍼는 공유 메모리인가? 아니면 세션 메모리인가?
> 세션 메모리

Q. 싱글 패스 정렬방식과 투 패스 정렬방식의 차이점은?
> 투패스 정렬방식은 테이블을 두 번 읽어야 하므로 상당히 비용이 많이 든다. 
> 싱글 패스 정렬방식은 테이블을 한번만 읽어도 되지만, 소트 버퍼의 공간을 많이 사용한다.
 
Q. Order by 방식 세가지
> 인덱스를 이용한 정렬, 조인의 드라이빙 테이블만 정렬, 조인 결과를 임시 테이블에 저장 후 정렬

Q. 정렬 처리 방식에는 스트리밍 방식과 버퍼링 방식이 있다. 다음 세가지 CASE는 어떤 방식을 사용하는가 ?
 1. 인덱스를 이용한 정렬
 2. 조인의 드라이빙 테이블만 정렬
 3. 조인 결과를 임시 테이블에 저장 후 정렬)
> 인덱스를 이용한 정렬 방식만 스트리밍 형태의 처리이고 나머지는 모두 버퍼링 방식이다. 

### 9.2.4 GROUP BY 처리

## 9.3 고급 최적화

